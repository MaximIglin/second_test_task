# Документация
### Установка и запуск на локальном сервере:
1. Клонировать или сохранить репозиторий
1. Создать и активировать виртуальное окружение
   ```
    python3.9 -m venv env 
    . ./env/bin/activate
   ```
2. Установить необходимые пакеты 

   ```
   pip install -r requirements.txt
   ```
3. Запуск локального сервера (предварительно настроив БД в settings.py)
   ```
   cd ./backend/
   python3.9 manage.py runserver
___   

### Все запросы отправляем в соответсвие с пунктами ниже, json в теле запроса (кроме файлов).

- #### Получить всех пользователей со списком домов: http://46.101.44.134/api/users/ (GET)

- #### Получить кокретного пользователя со списком домов: http://46.101.44.134/api/users/ (GET); body(json): { "id":1 }

- #### Получить все дома пользователя по id: http://46.101.44.134/api/users_houses/ (GET); body(json): { "id":1 }

- #### Получить все дома: http://46.101.44.134/api/get_houses (GET)

- #### Обновить данные по дому: http://46.101.44.134/api/houses_update/1/ (где 1-id дома) (POST) body(json):{"cost":50000, "user_id":1, "adress":"some_new_adress"}

- #### Добавить или удалить дом: http://46.101.44.134/api/add_or_delete_house/ (POST) body(json):{"cost":50000, "user_id":1, "adress":"some_new_adress"}<br> http://46.101.44.134/api/add_or_delete_house/ (DELETE) body(json): {"house_id":1"}

- #### Обновить юзера: <br>http://46.101.44.134/api/user_update/ (POST) body(json): {"id":1}

- #### Добавить или перезаписать файл .json http://46.101.44.134/api/file_system/ (POST) body(json): {"language_code":ru-RU",  "data":"some_data_array"}

- #### Удалить файл .json http://46.101.44.134/api/file_system/ (DELETE) body(json): {"language_code":ru-RU"}

- #### Добавить фотографию, если её размер менее 1мб: http://46.101.44.134/api/images/ (POST) <br>FORM-DATA: "image": image.jpg
___
### Предложения по оптимизации

- #### Добавить у таблицы домов 2 поля:
    - Предыдущие (при удалении дома у пользователя, дом не удаляется, а в данное поле записывается юзер, которому пренадлежит этот дом, поле user либо обновлется, либо становится null)
    - Предыдущие цены (по аналогии с владельцами)

- #### Сортировка файлов в файловой системе по коду языка: крайне много одинаковых языков для разных стран, целесообразно было бы хранить эти файлы в директориях по коду языка (например, en-US И en-GB в директории en)

- #### Сократить количество sql-запросов до минимального количества, тк при данной архитектуре DJANGO при одном обращении к БД делает несколько запросов.

- #### Запросы Django защищены от SQL-инъекций

- #### Обернуть взаимодействия с БД в транзакции там, где это необходимо (можно с помощью встроенных в django транзакций)
___
